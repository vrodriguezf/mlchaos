---

title: Experiments

keywords: fastai
sidebar: home_sidebar

summary: "Experiments to be run as CLI scripts (too long to run in a Jupyter session)"
description: "Experiments to be run as CLI scripts (too long to run in a Jupyter session)"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/experiments.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Analyse-the-impact-of-the-number-of-points-on-the-performance-of-the-motion-classifier">Analyse the impact of the number of points on the performance of the motion classifier<a class="anchor-link" href="#Analyse-the-impact-of-the-number-of-points-on-the-performance-of-the-motion-classifier"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The results will be logged in a run group in wandb, and from there the visualizations will be made</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="x_sequence_length" class="doc_header"><code>x_sequence_length</code><a href="https://github.com/vrodriguezf/mlchaos/tree/master/mlchaos/experiments.py#L11" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>x_sequence_length</code>(<strong><code>min_rp</code></strong>:"Minimum resampling period"=<em><code>1</code></em>, <strong><code>max_rp</code></strong>:"Maximum resampling period"=<em><code>10</code></em>, <strong><code>rep_times</code></strong>:"Number of times ru run per rp"=<em><code>10</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span>
<span class="n">x_sequence_length</span><span class="p">(</span><span class="n">max_rp</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">rep_times</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">PapermillExecutionError</span>                   Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-17-0ea2a5e38050&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>x_sequence_length<span class="ansi-blue-fg">(</span>max_rp<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">10</span><span class="ansi-blue-fg">,</span> rep_times<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">10</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-15-c5ee31acaefb&gt;</span> in <span class="ansi-cyan-fg">x_sequence_length</span><span class="ansi-blue-fg">(min_rp, max_rp, rep_times)</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span>                                     use_wandb<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">     12</span>                                     wandb_group<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;x_sequence_length&#39;</span><span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">---&gt; 13</span><span class="ansi-red-fg">                                     </span>resampling_period<span class="ansi-blue-fg">=</span>x
<span class="ansi-green-intense-fg ansi-bold">     14</span>                                 ))

<span class="ansi-green-fg">~/.local/lib/python3.6/site-packages/papermill/execute.py</span> in <span class="ansi-cyan-fg">execute_notebook</span><span class="ansi-blue-fg">(input_path, output_path, parameters, engine_name, request_save_on_cell_execute, prepare_only, kernel_name, progress_bar, log_output, stdout_file, stderr_file, start_timeout, report_mode, cwd, **engine_kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    108</span> 
<span class="ansi-green-intense-fg ansi-bold">    109</span>             <span class="ansi-red-fg"># Check for errors first (it saves on error before raising)</span>
<span class="ansi-green-fg">--&gt; 110</span><span class="ansi-red-fg">             </span>raise_for_execution_errors<span class="ansi-blue-fg">(</span>nb<span class="ansi-blue-fg">,</span> output_path<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    111</span> 
<span class="ansi-green-intense-fg ansi-bold">    112</span>         <span class="ansi-red-fg"># Write final output in case the engine didn&#39;t write it on cell completion.</span>

<span class="ansi-green-fg">~/.local/lib/python3.6/site-packages/papermill/execute.py</span> in <span class="ansi-cyan-fg">raise_for_execution_errors</span><span class="ansi-blue-fg">(nb, output_path)</span>
<span class="ansi-green-intense-fg ansi-bold">    220</span> 
<span class="ansi-green-intense-fg ansi-bold">    221</span>         write_ipynb<span class="ansi-blue-fg">(</span>nb<span class="ansi-blue-fg">,</span> output_path<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 222</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">raise</span> error

<span class="ansi-red-fg">PapermillExecutionError</span>: 
---------------------------------------------------------------------------
Exception encountered at &#34;In [34]&#34;:
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
&lt;ipython-input-34-d43408bc92b6&gt; in &lt;module&gt;
      6                        largest=True, ylim=ylim,
      7                        predicted=&#39;rotational&#39;,
----&gt; 8                        actual=&#39;librational&#39;)

~/work/mlchaos/utils.py in plot_top_losses(self, k, largest, predicted, actual, **kwargs)
     47     def plot_top_losses(self, k, largest=True, predicted=None,
     48                         actual=None, **kwargs):
---&gt; 49         losses,idx = self.top_losses(k, largest, predicted, actual)
     50         if not isinstance(self.inputs, tuple): self.inputs = (self.inputs,)
     51         if isinstance(self.inputs[0], torch.Tensor): inps = tuple(o[idx] for o in self.inputs)

~/work/mlchaos/utils.py in top_losses(self, k, largest, predicted, actual)
     38             cond_actuals = (self.targs == self.vocab.o2i[actual]) if actual else tensor(True)
     39             idxs = (cond_preds &amp; cond_actuals).nonzero().squeeze()
---&gt; 40             loss_subset = self.losses[idxs].topk(ifnone(k, len(idxs)), largest=largest)
     41             # The indices in loss_subset are relative to the object `idxs`. We have to
     42             # return the aboluste idxs with respect to the `self` object.

RuntimeError: selected index k out of range
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

